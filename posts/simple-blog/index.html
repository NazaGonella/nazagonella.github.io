<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Setting Up a Simple Blog - Handmade Static Site
Generator</title>
  <link rel="stylesheet" href="/style.css">
</head>

<body>
    <header>
        <link rel="icon" href="/assets/favicon.svg" type="image/svg">
        <a class="author-name" href="/">Nazareno Gonella</a>
        <nav>
            <a class="title" href="/">Blog</a>
            <span class="separator"></span>
            <a class="title" href="/about/">About</a>
            <span class="separator"></span>
            <a class="title" href="/resume/es/">Resume</a>
            <span class="separator"></span>
            <a class="title" href="/feed.xml">RSS</a>
        </nav>
    </header>

  <main>
    <article>
      <hr>
      <h2>Setting Up a Simple Blog - Handmade Static Site Generator</h2>
      <p><em>November 04, 2025</em></p>
      <hr />
      <p>You can check the repository <a
      href="https://github.com/NazaGonella/yors-generator">here</a>.</p>
      <p>The idea to start writing a blog has been in my mind for some
      time now, until today that I decided to get on with it. And what
      better way to begin than writing about this same process?</p>
      <hr />
      <h3 id="what-am-i-looking-for">What Am I Looking For?</h3>
      <p>From the start I knew I wanted something simple, easy to
      maintain and quick to iterate. One of the major reasons I’m doing
      this is to structure my thinking when working on any type of
      project, and for that I need not be distracted by implementation
      details.</p>
      <hr />
      <h3 id="barebones">Barebones</h3>
      <p>Still, I would like to have some formatting, as there were
      times I would take notes in plain text files for then to never
      come back to them. So I’m using the next closest thing,
      Markdown.</p>
      <p>Now what I need is to convert this Markdown file into a HTML
      file. After looking around through some posts on reddit, I found
      the <a href="https://pandoc.org/">pandoc</a> document converter,
      exactly what I needed. For any Markdown file I just had to run
      <code>pandoc input.md -o index.html</code>.</p>
      <p>Pandoc uses an extended version of Markdown which comes in
      handy, as it includes support for tables, definition lists,
      footnotes, citations and even math. It also supports <em>Metadata
      Blocks</em>, which allows including information such as
      <code>% title</code>, <code>% author</code> and
      <code>% date</code>. I will only be using <code>% title</code>
      since the tool issues a warning when not using it.</p>
      <p>And there it was, just what I wanted, almost.</p>
      <hr />
      <h3 id="not-stylish-just-yet">Not Stylish, Just Yet</h3>
      <p>A plain HTML file with formatted text is a lot better than a
      plain text file, but unfortunately it doesn’t look good on the
      portfolio.</p>
      <p>I need something simple, but still good looking. Luckily you
      can link a <code>.css</code> file to the output of pandoc using
      the <code>--css</code> argument. The problem is I don’t have much
      experience using css, so it is time to look for references.</p>
      <p>I really like <a href="https://fabiensanglard.net/">Fabien
      Sanglard’s</a> and <a href="https://stevelosh.com/">Steve
      Losh’s</a> websites. They are minimalistic, nice to look at, and
      easy to read. I appreciate how you can immediately see all the
      stuff the authors have been working on or pondering over the last
      couple of years as soon as you enter. With the help of inspect
      element, a couple of queries to ChatGPT, and a background from <a
      href="https://heropatterns.com/">Hero Patterns</a>, I ended up
      with a style I was happy with.</p>
      <p>There was now a need for a nice header: css and Markdown alone
      wouldn’t suffice. Fortunately, pandoc allows for HTML to be
      written into the Markdown file, which it then passes to the final
      output unchanged. I can now define a simple header to include on
      all the pages and ensure a concise style, but to achieve that I
      would have to copy and paste the same header everytime I create a
      new page. It would be nice to have some sort of page template.</p>
      <hr />
      <h3 id="the-page-template">The Page Template</h3>
      <p>I went on and created <code>create-post.py</code>, a Python
      script that takes <code>&lt;file-name&gt;</code> and
      <code>&lt;post-title&gt;</code> as arguments. This script creates
      <code>&lt;file-name&gt;.md</code> and writes to it the metadata
      block <code>% &lt;post-title&gt;</code>, the page header and the
      post header with the date of when the post was created.<a
      href="#fn1" class="footnote-ref" id="fnref1"
      role="doc-noteref"><sup>1</sup></a></p>
      <pre><code>header_date = datetime.now().strftime(&quot;%B {S}, %Y&quot;).replace(&#39;{S}&#39;, str(datetime.now().day))

header = f&quot;&quot;&quot;%{post_title}

&lt;header&gt;
    header content goes here
&lt;/header&gt;

## {post_title}

{header_date}

---
&quot;&quot;&quot;

with open(f&quot;{posts_path}/{file_name}/{file_name}.md&quot;, &quot;w&quot;, encoding=&quot;utf-8&quot;) as f:
    f.write(header)</code></pre>
      <p>I also included some code to add the post entry along with the
      date to the home page</p>
      <pre><code>home_path = &quot;./home.md&quot;
date_entry = datetime.now().strftime(&quot;%d/%m/%Y&quot;)
post_entry = f&quot;{date_entry}: [**{post_title}**]({posts_path}/{file_name}/index.html)  \n&quot;

with open(home_path, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:
    lines = f.readlines()

lines.insert(7, post_entry) # hardcoded position, for now

with open(home_path, &quot;w&quot;, encoding=&quot;utf-8&quot;) as f:
    f.writelines(lines)</code></pre>
      <p>Some of this code is hardcoded. I plan on adding config files
      in the future. To see the full code visit the <a
      href="https://github.com/NazaGonella/ngonella-static-site-generator">repository</a>.</p>
      <p>With this, I now have an easy way of creating new entries.</p>
      <hr />
      <h3 id="generating-the-site">Generating the Site</h3>
      <p>Calling pandoc for every <code>.md</code> file is not ideal.
      That’s why I implemented <code>build.py</code>, a minimal build
      system for transforming recently modified Markdown files into HTML
      files.</p>
      <pre><code>import os
import subprocess
from pathlib import Path

css_path = Path(&quot;style.css&quot;).resolve()      # absolute path to CSS

ignored_mds = [Path(&quot;./README.md&quot;)]         # will not apply to ALL Markdown files

markdown_files = [md for md in Path(&quot;.&quot;).rglob(&quot;*.md&quot;) if md not in ignored_mds]

paired_files = [(md, md.parent / &quot;index.html&quot;) for md in markdown_files if md not in ignored_mds]   # target: index.html file in the same directory

print(&quot;### BUILD ###&quot;)

for md, html in paired_files:
    mod_time_md = md.stat().st_mtime
    if html.exists():
        mod_time_html = html.stat().st_mtime
        if mod_time_html &gt;  mod_time_md:
            continue

    relative_path_css  = os.path.relpath(css_path, start=html.parent)  # relative to html and md path

    subprocess.run([
        &quot;pandoc&quot;,
        &quot;-s&quot;, str(md),
        &quot;-o&quot;, str(html),
        &quot;--css&quot;, relative_path_css,
        &quot;-V&quot;, &quot;title=&quot;
    ])

    print(md, &quot;-&gt;&quot;, html)</code></pre>
      <p><code>-s</code> inserts the necessary headers and footers to
      create a full HTML file.</p>
      <p><code>-V title=</code> prevents pandoc of inserting the
      variable defined in <code>% title</code> as a header, while still
      keeping it as the document title.</p>
      <hr />
      <h3 id="workflow">Workflow</h3>
      <p>I will be using <a href="https://www.vim.org/">vim</a> as my
      text editor, primarily for three reasons.</p>
      <ol type="1">
      <li>Fast and comfortable to write in.</li>
      <li>Very customizable.</li>
      <li>Looks cool.</li>
      </ol>
      <p>Probably one of the most important aspects of using vim in this
      case is having the option to execute a command when saving the
      file. Thanks to this, I can now avoid having to call pandoc with
      the same arguments everytime I want to see the results on the
      browser. I just save the file and the HTML file is automatically
      generated.</p>
      <p>I added the following to the <code>.vimrc</code></p>
      <pre><code>let s:script_dir = expand(&#39;&lt;sfile&gt;:p:h&#39;)
autocmd FileType markdown autocmd BufWritePost &lt;buffer&gt; execute &#39;!python3 &#39; . shellescape(s:script_dir . &#39;/build.py&#39;)</code></pre>
      <p>This will apply only when saving <code>.md</code> files.<a
      href="#fn2" class="footnote-ref" id="fnref2"
      role="doc-noteref"><sup>2</sup></a></p>
      <p>How about deployment? As I’m using Github Pages for hosting,
      pushing my local files to the remote repository will deploy the
      page. The thing is, I don’t want to deploy everytime I correct a
      minor mistake, it would make version control really
      uncomfortable.</p>
      <p>To fix this I created a new <code>working</code> branch. Every
      change I make gets pushed to that branch. And once I feel it’s
      time to deploy, I merge into the <code>master</code> branch.</p>
      <p>For easy deployment I made a simple shell script
      <code>deploy.sh</code>.</p>
      <pre><code>set -e

working_branch=&quot;working&quot;

git checkout master
git merge &quot;$working_branch&quot; --no-ff -m &quot;Merge $working_branch branch into master&quot;
git push origin master

echo &quot;Master branch updated&quot;

git checkout &quot;$working_branch&quot;</code></pre>
      <p><code>set -e</code> tells the shell to exit immediately if any
      command fails.</p>
      <p><code>--no-ff</code> ensures git creates a merge commit even if
      a fast-forward is possible.</p>
      <hr />
      <p>And there it is, a simple framework for my use case. Every time
      I want to write about a new topic, I run
      <code>create-post.py</code> and start writing right away. Once I’m
      done, I simply save and check the browser. If I’m happy with the
      result, I commit, push to origin and then run
      <code>deploy.sh</code>. And just like that a new entry is added to
      the blog.</p>
      <p>Initially, I wasn’t familiar with the concept of static site
      generators. I’ve seen recommendations of tools like <a
      href="https://jekyllrb.com/">Jekyll</a> or <a
      href="https://gohugo.io/">Hugo</a> for easily creating personal
      websites, but I felt they were more than what I needed at the
      moment<a href="#fn3" class="footnote-ref" id="fnref3"
      role="doc-noteref"><sup>3</sup></a>. I also liked the idea of
      creating a basic blog framework. What I ended up with was a custom
      static site generator.</p>
      <p>Now it’s a matter of time to see how well this framework holds
      up for me.</p>
      <section id="footnotes"
      class="footnotes footnotes-end-of-document" role="doc-endnotes">
      <hr />
      <ol>
      <li id="fn1"><p>It would make more sense for the date to be the
      day it’s published, added to the TODO list.<a href="#fnref1"
      class="footnote-back" role="doc-backlink">↩︎</a></p></li>
      <li id="fn2"><p>This assumes the .vimrc or .exrc files are in the
      same directory as build.py.<a href="#fnref2" class="footnote-back"
      role="doc-backlink">↩︎</a></p></li>
      <li id="fn3"><p>Reading Fabien Sanglard’s post <a
      href="https://fabiensanglard.net/html/index.html">All you may need
      is HTML</a> may have had an effect on this decision.<a
      href="#fnref3" class="footnote-back"
      role="doc-backlink">↩︎</a></p></li>
      </ol>
      </section>
    </article>
  </main>

  </body>
</html>
